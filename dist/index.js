!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("ux-scroll",[],n):"object"==typeof exports?exports["ux-scroll"]=n():t["ux-scroll"]=n()}(this,(function(){return(()=>{"use strict";var t={d:(n,o)=>{for(var e in o)t.o(o,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:o[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};function o(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}t.r(n),t.d(n,{UxScrollCallback:()=>U,UxScrollTransition:()=>C});var e,i,r,s,c,a,u,l,f,h,p,d,m,y,b,g,w,v,P,O,j,T,S=function(t,n,o,e,i){if("m"===e)throw new TypeError("Private method is not writable");if("a"===e&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?t!==n||!i:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===e?i.call(t,o):i?i.value=o:n.set(t,o),o},E=function(t,n,o,e){if("a"===o&&!e)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?t!==n||!e:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?e:"a"===o?e.call(t):e?e.value:n.get(t)};!function(t){t.Y="y",t.X="x"}(j||(j={})),function(t){t.Y="height",t.X="width"}(T||(T={}));var x=function(){function t(n){var o=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),e.add(this),i.set(this,void 0),r.set(this,j.Y),s.set(this,void 0),this.scrollPosition=-1,this.scrollDirection=1,w.set(this,E(this,e,"m",P).call(this,(function(){o.elements&&(o.scrollPosition>window.scrollY?o.scrollDirection&&E(o,e,"m",g).call(o,0):o.scrollPosition<window.scrollY&&!o.scrollDirection&&E(o,e,"m",g).call(o,1),E(o,e,"m",b).call(o),o.scrollPosition=window.scrollY)}))),v.set(this,E(this,e,"m",P).call(this,(function(){o.elements&&(o.windowSize=E(o,e,"m",m).call(o),o.scrollSize=E(o,e,"m",y).call(o),o.options=E(o,e,"m",f).call(o,{options:E(o,i,"f").options,commonOptions:E(o,i,"f").commonOptions}))}))),S(this,i,n,"f"),this.elements=E(this,e,"m",p).call(this),S(this,s,E(this,e,"m",d).call(this),"f"),E(this,v,"f").call(this),this.onResize=E(this,e,"m",O).call(this,E(this,v,"f"),E(this,e,"a",l)),this.onScroll=E(this,e,"m",O).call(this,E(this,w,"f"),E(this,e,"a",l))}var n,c;return n=t,(c=[{key:"scrollBottomPosition",get:function(){return this.scrollPosition+this.windowSize}},{key:"scrollTopPosition",get:function(){return this.scrollPosition}},{key:"onStarting",value:function(t){}},{key:"onDoing",value:function(t){}},{key:"onEnding",value:function(t){}}])&&o(n.prototype,c),Object.defineProperty(n,"prototype",{writable:!1}),t}();function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function k(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function B(t,n){return B=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},B(t,n)}function _(t,n){if(n&&("object"===M(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}i=new WeakMap,r=new WeakMap,s=new WeakMap,w=new WeakMap,v=new WeakMap,e=new WeakSet,c=function(){var t=this;return this.options.filter((function(n){var o=n.startTopPosition,e=n.startBottomPosition,i=n.index;return n.starting&&(t.scrollDirection?o<=t.scrollBottomPosition:e>=t.scrollTopPosition)&&E(t,s,"f")[i].starting}))},a=function(){var t=this;return this.options.filter((function(n){var o=n.startTopPosition,e=n.endBottomPosition,i=n.index;return n.doing&&(t.scrollDirection?o<=t.scrollTopPosition:e>=t.scrollBottomPosition)&&E(t,s,"f")[i].doing}))},u=function(){var t=this;return this.options.filter((function(n){var o=n.ending,e=n.index,i=n.endTopPosition,r=n.endBottomPosition;return o&&(t.scrollDirection?i<=t.scrollBottomPosition:r>=t.scrollTopPosition)&&E(t,s,"f")[e].ending}))},l=function(){return E(this,i,"f").throttleTimer||0},f=function(t){var n=this,o=t.options,i=t.commonOptions;return!o&&(o={}),!i&&(i={}),this.elements.map((function(t,s){var c=E(n,r,"f")===j.Y?t.offsetTop:t.offsetLeft,a=E(n,r,"f")===j.Y?t.offsetHeight:t.offsetWidth,u=c+a,l=Object.assign(i,o[s]),f=E(n,e,"m",h).call(n,l.startTopMargin),p=E(n,e,"m",h).call(n,l.endTopMargin),d=E(n,e,"m",h).call(n,l.startBottomMargin),m=E(n,e,"m",h).call(n,l.endBottomMargin);return Object.assign(Object.assign({index:s,size:a},l),{startTopPosition:c+f,endTopPosition:u+p,startBottomPosition:c+d,endBottomPosition:u+m})}))},h=function(t){return t?t.includes("px")?Number(t.replace("px","")):t.includes("%")?Number(t.replace("%",""))*this.windowSize/100:Number(t)*this.windowSize:0},p=function(){return Array.prototype.slice.call(document.querySelectorAll(E(this,i,"f").selector))},d=function(){return this.elements.map((function(){return{starting:!0,doing:!0,ending:!0}}))},m=function(){return E(this,r,"f")===j.Y?window.innerHeight:window.innerWidth},y=function(){return E(this,r,"f")===j.Y?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth)},b=function(){var t=this;E(this,e,"a",c).map((function(n){var o=n.index;t.onStarting(o)&&(E(t,s,"f")[o].starting=!1)})),E(this,e,"a",a).map((function(n){var o=n.index;t.onDoing(o)&&(E(t,s,"f")[o].doing=!1)})),E(this,e,"a",u).map((function(n){var o=n.index;t.onEnding(o)&&(E(t,s,"f")[o].ending=!1)}))},g=function(t){for(var n in this.scrollDirection=t,E(this,s,"f"))E(this,s,"f")[n].starting=!0,E(this,s,"f")[n].doing=!0,E(this,s,"f")[n].ending=!0},P=function(t){var n=!1;return function(){n||(n=!0,requestAnimationFrame((function(){t(),n=!1})))}},O=function(t,n){var o,e=this;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];o||(o=setTimeout((function(){t.call(e,r),o=!1}),n))}};var C=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&B(t,n)}(s,t);var n,o,e,i,r=(e=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=D(e);if(i){var o=D(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return _(this,t)});function s(t){return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,Object.assign(Object.assign({},t),{commonOptions:Object.assign({starting:"ux__transition--animated",startTopMargin:".2",startBottomMargin:"-1"},t.commonOptions)}))}return n=s,(o=[{key:"onStarting",value:function(t){return this.scrollDirection?this.elements[t].classList.add(this.options[t].starting):this.elements[t].classList.remove(this.options[t].starting),!0}}])&&k(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(x);const W={linear:function(t){return t},quadratic:function(t){return t*(-t*t*t+4*t*t-6*t+4)},cubic:function(t){return t*(4*t*t-9*t+6)},elastic:function(t){return t*(33*t*t*t*t-106*t*t*t+126*t*t-67*t+15)},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1+--t*t*t*t*t},inOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},inSine:function(t){return 1-Math.cos(t*(Math.PI/2))},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-(Math.cos(Math.PI*t)-1)/2},inExpo:function(t){return Math.pow(2,10*(t-1))},outExpo:function(t){return 1-Math.pow(2,-10*t)},inOutExpo:function(t){return(t/=.5)<1?Math.pow(2,10*(t-1))/2:(t--,(2-Math.pow(2,-10*t))/2)},inCirc:function(t){return 1-Math.sqrt(1-t*t)},outCirc:function(t){return Math.sqrt(1-(t-=1)*t)},inOutCirc:function(t){return(t/=.5)<1?-(Math.sqrt(1-t*t)-1)/2:(t-=2,(Math.sqrt(1-t*t)+1)/2)}};function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function z(t,n){for(var o=0;o<n.length;o++){var e=n[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function Y(t,n){return Y=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},Y(t,n)}function Q(t,n){if(n&&("object"===R(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return H(t)}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}var F,A,I,L,N=function(t,n,o,e){if("a"===o&&!e)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof n?t!==n||!e:!n.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?e:"a"===o?e.call(t):e?e.value:n.get(t)},U=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&Y(t,n)}(s,t);var n,o,e,i,r=(e=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=q(e);if(i){var o=q(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return Q(this,t)});function s(t){var n;return function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,s),n=r.call(this,Object.assign(Object.assign({},t),{commonOptions:Object.assign({starting:"starting",doing:"doing",ending:"ending",startingFrame:999,doingFrame:999,endingFrame:999,startingEasing:"inCubic",doingEasing:"inCubic",endingEasing:"inCubic"},t.commonOptions)})),F.add(H(n)),A.set(H(n),void 0),function(t,n,o,e,i){if("m"===e)throw new TypeError("Private method is not writable");if("a"===e&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof n?t!==n||!i:!n.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===e?i.call(t,o):i?i.value=o:n.set(t,o)}(H(n),A,t.callbacks,"f"),n}return n=s,(o=[{key:"onStarting",value:function(t){var n=this.options[t].startingFrame,o=this.options[t].starting,e=this.options[t].startingEasing,i=this.scrollDirection?this.options[t].startTopPosition:this.options[t].startBottomPosition,r=(this.scrollBottomPosition-i)/this.windowSize;return N(this,F,"m",L).call(this,{easing:e,status:o,index:t,level:r,frame:n})}},{key:"onDoing",value:function(t){var n=this.options[t].doingFrame,o=this.options[t].doing,e=this.options[t].doingEasing,i=1-((this.scrollDirection?this.options[t].endTopPosition:this.options[t].endBottomPosition)-this.scrollBottomPosition)/(this.options[t].size-this.windowSize);return N(this,F,"m",L).call(this,{easing:e,status:o,index:t,level:i,frame:n})}},{key:"onEnding",value:function(t){var n=this.options[t].endingFrame,o=this.options[t].ending,e=this.options[t].endingEasing,i=1-((this.scrollDirection?this.options[t].endTopPosition:this.options[t].endBottomPosition)-this.scrollTopPosition)/this.windowSize;return N(this,F,"m",L).call(this,{easing:e,status:o,index:t,level:i,frame:n})}}])&&z(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),s}(x);return A=new WeakMap,F=new WeakSet,I=function(t,n,o){t>1&&(t=1),t<0&&(t=0);var e=W[o];return Math.ceil(e(t)*n)},L=function(t){var n=t.index,o=t.status,e=t.level,i=t.frame,r=t.easing,s=N(this,A,"f")[n],c=N(this,F,"m",I).call(this,e,i,r),a=this.elements[n];if(s&&s({scrollDirection:this.scrollDirection,status:o,index:n,step:c,element:a}),e<0||e>1)return!0},n})()}));